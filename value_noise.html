<body style=margin:0>
    <canvas id=a></canvas>
    <script>
        c = a.getContext`2d`;
        eio = (x) => -2 * x * x * x + 3 * x * x;
        lerp = (a, b, t) => a * (1 - t) + b * t;
        seed = ogSeed = 684651685;
        sizeFactor = 10;
        // From here https://github.com/bryc/code/blob/master/jshash/PRNGs.md#lcg-lehmer-rng
        LCG = () => ((seed = Math.imul(741103597, seed)) >>> 0) / 2 ** 32;
        f = () => {
            a.width = 1 << sizeFactor; a.height = 1 << sizeFactor;
            seed = ogSeed = ogSeed + 2;
            LCG(); LCG(); LCG(); LCG(); LCG();
            grid = new Array(1 << (2 * sizeFactor));
            for (i = 0; i < 1 << (2 * sizeFactor); i++) grid[i] = LCG();
            imageData = c.createImageData(1 << sizeFactor, 1 << sizeFactor);
            for (j = 0; j <= sizeFactor - 4; j++) {
                let factor = sizeFactor - j;
                for (i = 0; i < 1 << (sizeFactor * 2); i++) {
                    x = i & ((1 << sizeFactor) - 1); y = i >> sizeFactor;
                    cxl = (x >> factor) & ((1 << sizeFactor) - 1); cxh = (cxl + 1) & ((1 << sizeFactor) - 1);
                    cyl = (y >> factor) & ((1 << sizeFactor) - 1); cyh = (cyl + 1) & ((1 << sizeFactor) - 1);
                    c1 = cxl + (cyh << sizeFactor); c2 = cxh + (cyh << sizeFactor);
                    c3 = cxl + (cyl << sizeFactor); c4 = cxh + (cyl << sizeFactor);
                    tx = eio(x / (1 << factor) - (x >> factor)); ty = eio(y / (1 << factor) - (y >> factor));
                    cup = lerp(grid[c1], grid[c2], tx); clo = lerp(grid[c3], grid[c4], tx);
                    n = lerp(clo, cup, ty) * 255 / (2 << j);
                    imageData.data[i * 4 + 0] += n; imageData.data[i * 4 + 1] += n; imageData.data[i * 4 + 2] += n;
                    imageData.data[i * 4 + 3] = 255;
                }
            }
            c.putImageData(imageData, 0, 0);
        }
        onclick = f;
        requestAnimationFrame(f);
    </script>
</body>
